<div class="auth-page">
  <div class="auth-container">

    <div class="auth-logo">
      <div class="logo-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M12 2V22M17 5H9.5C8.57 5 7.68 5.37 7.03 6.03C6.37 6.68 6 7.57 6 8.5C6 9.43 6.37 10.32 7.03 10.97C7.68 11.63 8.57 12 9.5 12H14.5C15.43 12 16.32 12.37 16.97 13.03C17.63 13.68 18 14.57 18 15.5C18 16.43 17.63 17.32 16.97 17.97C16.32 18.63 15.43 19 14.5 19H6"
            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="logo-name">ExpenseTracker</div>
    </div>

    <div class="auth-card">
      <h2>Welcome back</h2>
      <p class="sub">Sign in to continue to your dashboard</p>

      <form [formGroup]="form" (ngSubmit)="onSubmit()">

        <div *ngIf="error" class="error-banner">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="none">
            <path d="M10 6V10M10 14H10.01M19 10C19 14.97 14.97 19 10 19C5.03 19 1 14.97 1 10C1 5.03 5.03 1 10 1C14.97 1 19 5.03 19 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>{{ error }}</span>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="16" height="16" viewBox="0 0 20 20" fill="none">
              <path d="M3 4H17C17.55 4 18 4.45 18 5V15C18 15.55 17.55 16 17 16H3C2.45 16 2 15.55 2 15V5C2 4.45 2.45 4 3 4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18 5L10 11L2 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="email" id="email" formControlName="email" placeholder="your@email.com"
              [class.error]="form.get('email')?.touched && form.get('email')?.invalid"/>
          </div>
          <span class="error-message" *ngIf="fieldErr('email')">{{ fieldErr('email') }}</span>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="16" height="16" viewBox="0 0 20 20" fill="none">
              <path d="M15 7H5C3.9 7 3 7.9 3 9V16C3 17.1 3.9 18 5 18H15C16.1 18 17 17.1 17 16V9C17 7.9 16.1 7 15 7Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 7V5C6 3.94 6.42 2.92 7.17 2.17C7.92 1.42 8.94 1 10 1C11.06 1 12.08 1.42 12.83 2.17C13.58 2.92 14 3.94 14 5V7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input [type]="showPwd ? 'text' : 'password'" id="password" formControlName="password"
              placeholder="Your password"
              [class.error]="form.get('password')?.touched && form.get('password')?.invalid"/>
            <button type="button" class="password-toggle" (click)="togglePwd()">
              <svg *ngIf="!showPwd" width="16" height="16" viewBox="0 0 20 20" fill="none">
                <path d="M1 10C1 10 4 4 10 4C16 4 19 10 19 10C19 10 16 16 10 16C4 16 1 10 1 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 12.5C11.38 12.5 12.5 11.38 12.5 10C12.5 8.62 11.38 7.5 10 7.5C8.62 7.5 7.5 8.62 7.5 10C7.5 11.38 8.62 12.5 10 12.5Z" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <svg *ngIf="showPwd" width="16" height="16" viewBox="0 0 20 20" fill="none">
                <path d="M14.95 14.95C13.53 16.04 11.79 16.64 10 16.67C4 16.67 1 10 1 10C2.07 7.86 3.64 6.01 5.6 4.6M8.25 3.53C8.82 3.4 9.41 3.33 10 3.33C16 3.33 19 10 19 10C18.36 11.21 17.56 12.33 16.62 13.33" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1 1L19 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <span class="error-message" *ngIf="fieldErr('password')">{{ fieldErr('password') }}</span>
        </div>

        <button type="submit" class="btn-primary" [disabled]="loading">
          <span *ngIf="!loading">Sign In</span>
          <span *ngIf="loading" class="loading-text">
            <svg class="spinner" width="16" height="16" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-dasharray="50" stroke-dashoffset="25"/>
            </svg>
            Signing in...
          </span>
        </button>
      </form>

      <div class="auth-footer">
        Don&rsquo;t have an account? <a routerLink="/register">Create one</a>
      </div>
    </div>

  </div>
</div>